<?php
$langs = ['az', 'ru', 'en'];

if (isset($_GET['lang']) && in_array($_GET['lang'], $langs, true)) {
  $_SESSION['lang'] = $_GET['lang'];
  setcookie('lang', $_GET['lang'], time() + 60 * 60 * 24 * 30, '/');
  $url = strtok($_SERVER['REQUEST_URI'], '?');
  $query = $_GET;
  unset($query['lang']);
  $qs = $query ? '?' . http_build_query($query) : '';
  header('Location: ' . $url . $qs);
  exit;
}

if (!empty($_COOKIE['lang']) && in_array($_COOKIE['lang'], $langs, true)) {
  $_SESSION['lang'] = $_COOKIE['lang'];
}

if (empty($_SESSION['lang'])) {
  $_SESSION['lang'] = 'az';
}

$I18N = [
  'az' => [
    'lang_az' => 'AZ',
    'lang_ru' => 'RU',
    'lang_en' => 'EN',
    'nav_home' => 'Ana sehife',
    'nav_shop' => 'Magaza',
    'nav_campaigns' => 'Kampaniyalar',
    'nav_giveaway' => 'Hediyye cekilisi',
    'nav_about' => 'Haqqimizda',
    'nav_contact' => 'Elaqe',
    'cta_shop' => 'Magaza',
    'topbar_delivery' => 'Rayonlara poctla catdirilma',
    'topbar_order' => 'Sifaris: Instagram DM / WhatsApp',
    'hero_tagline' => 'Luxury boutique',
    'hero_title' => 'powergirls.az ile zeriflik',
    'hero_subtitle' => 'Qadin ve usaqlar ucun premium aksesuarlar. 10 saniyede asiq olacaginiz secimler.',
    'hero_cta_women' => 'Qadin',
    'hero_cta_kids' => 'Usaq',
    'section_bestseller' => 'Bestseller',
    'section_new' => 'Yeni mehsullar',
    'section_gift' => 'Hediyye ucun hazir',
    'gift_text' => 'Hediyye ucun hazir qablasdirma, zerif teqdimat ve premium hiss.',
    'section_campaign' => 'Kampaniya',
    'campaign_text_fallback' => 'Secilmis mehsullarda endirim kampaniyalari.',
    'section_giveaway' => 'Hediyye cekilisi',
    'giveaway_text_fallback' => 'Takip artdiqda hediyye cekilisi kampaniyalari.',
    'section_instagram' => 'Instagram',
    'follow_instagram' => 'Izleyin',
    'footer_delivery' => 'Catdirilma',
    'footer_returns' => 'Qaytarilma',
    'footer_faq' => 'Sual-cavab',
    'footer_follow' => 'Sosial',
    'filters_search_label' => 'Axtaris',
    'filters_search_placeholder' => 'Mehsul axtar...',
    'filters_category' => 'Kateqoriya',
    'filters_price' => 'Qiymet araligi',
    'filters_badges' => 'Etiket',
    'filters_sort' => 'Siralama',
    'filters_apply' => 'Filtrle',
    'category_all' => 'Hamisi',
    'category_women' => 'Qadin',
    'category_kids' => 'Usaq',
    'badge_all' => 'Hamisi',
    'badge_bestseller' => 'Bestseller',
    'badge_new' => 'Yeni',
    'badge_discount' => 'Endirim',
    'sort_newest' => 'En yeni',
    'sort_price_low' => 'Ucuzdan bahaya',
    'sort_price_high' => 'Bahadan ucuza',
    'sort_popular' => 'Populyar',
    'shop_title' => 'Magaza',
    'shop_subtitle' => 'Her zovq ucun zerif secimler',
    'product_quantity' => 'Miqdar',
    'product_order_whatsapp' => 'WhatsApp ile sifaris',
    'product_order_instagram' => 'Instagram DM sifaris',
    'product_order_form' => 'Sifaris formu',
    'tabs_description' => 'Tesvir',
    'tabs_delivery' => 'Catdirilma',
    'tabs_returns' => 'Qaytarilma',
    'returns_text' => 'Qaytarilma ucun mehsul istifade edilmemis ve orijinal qablasdirmada olmalidir.',
    'order_form_title' => 'Sifaris formu',
    'order_form_note' => 'Odenis yoxdur. Sifaris WhatsApp/DM ile tesdiqlenir.',
    'order_name' => 'Ad Soyad',
    'order_phone' => 'Telefon',
    'order_city' => 'Seher',
    'order_address' => 'Unvan (isteye bagli)',
    'order_delivery' => 'Catdirilma novu',
    'order_note' => 'Qeyd (isteye bagli)',
    'order_submit' => 'Sifarisi gonder',
    'order_success_title' => 'Sifaris qebul olundu',
    'order_success_text' => 'WhatsApp mesaji hazirdir. Gondermek ucun duymeye klikleyin.',
    'order_copy' => 'Sifaris metnini kopyala',
    'order_open_whatsapp' => 'WhatsApp ac',
    'order_validation_error' => 'Zehmet olmasa butun teleb olunan saheleri doldurun.',
    'contact_title' => 'Elaqe',
    'contact_subtitle' => 'Suretli sifaris ucun DM/WhatsApp',
    'contact_channels' => 'Sifaris kanallari',
    'contact_text' => 'Instagram DM ve WhatsApp ile suretli sifaris qebul edilir.',
    'contact_hours' => 'Is saatlari',
    'contact_hours_text' => 'Her gun 10:00 - 21:00',
    'about_title' => 'Haqqimizda',
    'about_subtitle' => 'Zeriflik, minimalizm ve keyfiyyet',
    'about_text_1' => 'powergirls.az - qadin ve usaq aksesuarlarinda premium secimler teqdim eden boutique brendidir.',
    'about_text_2' => 'Her bir mehsul secimi, rahatliq ve zeriflik balansi ile hazirlanir.',
    'campaigns_title' => 'Kampaniyalar',
    'giveaway_title' => 'Hediyye cekilisi',
    'give_steps' => 'Addimlar',
    'give_step_1' => 'Sehifeni izleyin',
    'give_step_2' => 'Paylasin ve dostunuzu tag edin',
    'give_step_3' => 'Neticeleri gozleyin',
    'give_winners' => 'Qalibler',
    'giveaway_winner_fallback' => 'Qalibler Instagram sehifemizde elan olunacaq.',
    'give_faq_text' => 'Hediyye cekilisi qaydalari ve neticeler sehifede qeyd olunur.',
    'faq_title' => 'Sual-cavab',
    'campaign_ends_in' => 'Kampaniya bitir:',
    'campaign_inactive' => 'Hazirda aktiv kampaniya yoxdur.',
    'delivery_text_fallback' => 'Rayonlara poctla catdirilma movcuddur.',
    'message_delivery_post' => 'Rayonlara poctla catdirilma',
    'message_order_channels' => 'Sifaris: Instagram DM / WhatsApp',
    'message_discount' => 'Endirim kampaniyalari',
    'message_giveaway' => 'Takip artdiqda hediyye cekilisi',
    'order_form_cta' => 'Sifaris formu',
    'pagination_prev' => 'Evvelki',
    'pagination_next' => 'Novbeti',
    'related_products' => 'Oxsar mehsullar',
    'city_baku' => 'Baki',
    'city_region' => 'Rayon',
    'delivery_courier' => 'Kuryer',
    'delivery_post' => 'Poct'
  ],
  'ru' => [
    'lang_az' => 'AZ',
    'lang_ru' => 'RU',
    'lang_en' => 'EN',
    'nav_home' => 'Glavnaya',
    'nav_shop' => 'Magazin',
    'nav_campaigns' => 'Kompanii',
    'nav_giveaway' => 'Rozygrysh',
    'nav_about' => 'O nas',
    'nav_contact' => 'Kontakty',
    'cta_shop' => 'Magazin',
    'topbar_delivery' => 'Dostavka v regiony pochtoy',
    'topbar_order' => 'Zakaz: Instagram DM / WhatsApp',
    'hero_tagline' => 'Luxury boutique',
    'hero_title' => 'Elegantnost s powergirls.az',
    'hero_subtitle' => 'Premialnye aksessuary dlya zhenshchin i detey. Vlyubites za 10 sekund.',
    'hero_cta_women' => 'Zhenschiny',
    'hero_cta_kids' => 'Deti',
    'section_bestseller' => 'Bestsellery',
    'section_new' => 'Novinki',
    'section_gift' => 'Podarok gotov',
    'gift_text' => 'Premialnaya upakovka i izyashchnaya podacha.',
    'section_campaign' => 'Kampaniya',
    'campaign_text_fallback' => 'Skidochnye kampanii na vybrannye tovary.',
    'section_giveaway' => 'Rozygrysh',
    'giveaway_text_fallback' => 'Rozygrysh pri roste podpischikov.',
    'section_instagram' => 'Instagram',
    'follow_instagram' => 'Podpisatsya',
    'footer_delivery' => 'Dostavka',
    'footer_returns' => 'Vozvrat',
    'footer_faq' => 'Vopros-otvet',
    'footer_follow' => 'Sotsialnye seti',
    'filters_search_label' => 'Poisk',
    'filters_search_placeholder' => 'Iskat tovar...',
    'filters_category' => 'Kategoriya',
    'filters_price' => 'Tsenovoy diapazon',
    'filters_badges' => 'Metka',
    'filters_sort' => 'Sortirovka',
    'filters_apply' => 'Filtr',
    'category_all' => 'Vse',
    'category_women' => 'Zhenschiny',
    'category_kids' => 'Deti',
    'badge_all' => 'Vse',
    'badge_bestseller' => 'Bestseller',
    'badge_new' => 'Novinki',
    'badge_discount' => 'Skidka',
    'sort_newest' => 'Samye novye',
    'sort_price_low' => 'Ot deshevogo k dorogomu',
    'sort_price_high' => 'Ot dorogogo k deshevomu',
    'sort_popular' => 'Populyarnye',
    'shop_title' => 'Magazin',
    'shop_subtitle' => 'Elegantnye podborki na lyuboy vkus',
    'product_quantity' => 'Kolichestvo',
    'product_order_whatsapp' => 'Zakazat cherez WhatsApp',
    'product_order_instagram' => 'Zakazat cherez Instagram DM',
    'product_order_form' => 'Forma zakaza',
    'tabs_description' => 'Opisanie',
    'tabs_delivery' => 'Dostavka',
    'tabs_returns' => 'Vozvrat',
    'returns_text' => 'Vozvrat vozmozhen tolko s originalnoy upakovkoy i pri otsutstvii sledov ispolzovaniya.',
    'order_form_title' => 'Forma zakaza',
    'order_form_note' => 'Oplaty net. Zakaz podtverzhdaetsya cherez WhatsApp/DM.',
    'order_name' => 'Imya i familiya',
    'order_phone' => 'Telefon',
    'order_city' => 'Gorod',
    'order_address' => 'Adres (neobyazatelno)',
    'order_delivery' => 'Tip dostavki',
    'order_note' => 'Kommentariy (neobyazatelno)',
    'order_submit' => 'Otpravit zakaz',
    'order_success_title' => 'Zakaz prinyat',
    'order_success_text' => 'Soobshchenie WhatsApp gotovo. Nazhmite, chtoby otpravit.',
    'order_copy' => 'Skopirovat tekst zakaza',
    'order_open_whatsapp' => 'Otkryt WhatsApp',
    'order_validation_error' => 'Pozhaluysta, zapolnite vse obyazatelnye polya.',
    'contact_title' => 'Kontakty',
    'contact_subtitle' => 'Bystryy zakaz cherez DM/WhatsApp',
    'contact_channels' => 'Kanaly zakaza',
    'contact_text' => 'Zakazy prinimayutsya cherez Instagram DM i WhatsApp.',
    'contact_hours' => 'Chasy raboty',
    'contact_hours_text' => 'Ezhednevno 10:00 - 21:00',
    'about_title' => 'O nas',
    'about_subtitle' => 'Elegantnost, minimalizm i kachestvo',
    'about_text_1' => 'powergirls.az - butik-brend s premialnymi aksessuarami dlya zhenshchin i detey.',
    'about_text_2' => 'Kazhdyy vybor - balans komforta i elegantnosti.',
    'campaigns_title' => 'Kompanii',
    'giveaway_title' => 'Rozygrysh',
    'give_steps' => 'Shagi',
    'give_step_1' => 'Podpishites na stranicu',
    'give_step_2' => 'Podelites i otmette druga',
    'give_step_3' => 'Ozhidayte rezultaty',
    'give_winners' => 'Pobediteli',
    'giveaway_winner_fallback' => 'Pobediteli budut obyavleny v Instagram.',
    'give_faq_text' => 'Pravila i rezultaty rozygrysha ukazany na stranitse.',
    'faq_title' => 'Vopros-otvet',
    'campaign_ends_in' => 'Kampaniya zakonchitsya:',
    'campaign_inactive' => 'Seichas aktivnykh kampaniy net.',
    'delivery_text_fallback' => 'Dostavka v regiony pochtoy dostupna.',
    'message_delivery_post' => 'Dostavka v regiony pochtoy',
    'message_order_channels' => 'Zakaz: Instagram DM / WhatsApp',
    'message_discount' => 'Skidochnye kampanii',
    'message_giveaway' => 'Rozygrysh pri roste podpischikov',
    'order_form_cta' => 'Forma zakaza',
    'pagination_prev' => 'Nazad',
    'pagination_next' => 'Dalee',
    'related_products' => 'Pokhozhie tovary',
    'city_baku' => 'Baku',
    'city_region' => 'Regiony',
    'delivery_courier' => 'Kuryer',
    'delivery_post' => 'Pochta'
  ],
  'en' => [
    'lang_az' => 'AZ',
    'lang_ru' => 'RU',
    'lang_en' => 'EN',
    'nav_home' => 'Home',
    'nav_shop' => 'Shop',
    'nav_campaigns' => 'Campaigns',
    'nav_giveaway' => 'Giveaway',
    'nav_about' => 'About',
    'nav_contact' => 'Contact',
    'cta_shop' => 'Shop',
    'topbar_delivery' => 'Postal delivery to regions',
    'topbar_order' => 'Order: Instagram DM / WhatsApp',
    'hero_tagline' => 'Luxury boutique',
    'hero_title' => 'Elegance with powergirls.az',
    'hero_subtitle' => 'Premium accessories for women and kids. Fall in love in 10 seconds.',
    'hero_cta_women' => 'Women',
    'hero_cta_kids' => 'Kids',
    'section_bestseller' => 'Bestsellers',
    'section_new' => 'New arrivals',
    'section_gift' => 'Gift-ready',
    'gift_text' => 'Premium packaging and refined presentation.',
    'section_campaign' => 'Campaign',
    'campaign_text_fallback' => 'Discount campaigns on selected items.',
    'section_giveaway' => 'Giveaway',
    'giveaway_text_fallback' => 'Giveaway when followers grow.',
    'section_instagram' => 'Instagram',
    'follow_instagram' => 'Follow',
    'footer_delivery' => 'Delivery',
    'footer_returns' => 'Returns',
    'footer_faq' => 'FAQ',
    'footer_follow' => 'Social',
    'filters_search_label' => 'Search',
    'filters_search_placeholder' => 'Search products...',
    'filters_category' => 'Category',
    'filters_price' => 'Price range',
    'filters_badges' => 'Badge',
    'filters_sort' => 'Sort',
    'filters_apply' => 'Apply',
    'category_all' => 'All',
    'category_women' => 'Women',
    'category_kids' => 'Kids',
    'badge_all' => 'All',
    'badge_bestseller' => 'Bestseller',
    'badge_new' => 'New',
    'badge_discount' => 'Discount',
    'sort_newest' => 'Newest',
    'sort_price_low' => 'Price low to high',
    'sort_price_high' => 'Price high to low',
    'sort_popular' => 'Popular',
    'shop_title' => 'Shop',
    'shop_subtitle' => 'Elegant picks for every taste',
    'product_quantity' => 'Quantity',
    'product_order_whatsapp' => 'Order via WhatsApp',
    'product_order_instagram' => 'Order via Instagram DM',
    'product_order_form' => 'Order form',
    'tabs_description' => 'Description',
    'tabs_delivery' => 'Delivery',
    'tabs_returns' => 'Returns',
    'returns_text' => 'Returns accepted only with original packaging and unused condition.',
    'order_form_title' => 'Order form',
    'order_form_note' => 'No payment now. Confirm via WhatsApp/DM.',
    'order_name' => 'Full name',
    'order_phone' => 'Phone',
    'order_city' => 'City',
    'order_address' => 'Address (optional)',
    'order_delivery' => 'Delivery type',
    'order_note' => 'Note (optional)',
    'order_submit' => 'Send order',
    'order_success_title' => 'Order received',
    'order_success_text' => 'WhatsApp message is ready. Click to send.',
    'order_copy' => 'Copy order text',
    'order_open_whatsapp' => 'Open WhatsApp',
    'order_validation_error' => 'Please fill all required fields.',
    'contact_title' => 'Contact',
    'contact_subtitle' => 'Fast order via DM/WhatsApp',
    'contact_channels' => 'Order channels',
    'contact_text' => 'Orders are accepted via Instagram DM and WhatsApp.',
    'contact_hours' => 'Working hours',
    'contact_hours_text' => 'Daily 10:00 - 21:00',
    'about_title' => 'About',
    'about_subtitle' => 'Elegance, minimalism, quality',
    'about_text_1' => 'powergirls.az is a boutique brand for women and kids accessories.',
    'about_text_2' => 'Each product balances comfort and elegance.',
    'campaigns_title' => 'Campaigns',
    'giveaway_title' => 'Giveaway',
    'give_steps' => 'Steps',
    'give_step_1' => 'Follow the page',
    'give_step_2' => 'Share and tag a friend',
    'give_step_3' => 'Wait for results',
    'give_winners' => 'Winners',
    'giveaway_winner_fallback' => 'Winners will be announced on Instagram.',
    'give_faq_text' => 'Giveaway rules are posted on this page.',
    'faq_title' => 'FAQ',
    'campaign_ends_in' => 'Campaign ends in:',
    'campaign_inactive' => 'No active campaigns.',
    'delivery_text_fallback' => 'Postal delivery to regions is available.',
    'message_delivery_post' => 'Postal delivery to regions',
    'message_order_channels' => 'Order: Instagram DM / WhatsApp',
    'message_discount' => 'Discount campaigns',
    'message_giveaway' => 'Giveaway as followers grow',
    'order_form_cta' => 'Order form',
    'pagination_prev' => 'Prev',
    'pagination_next' => 'Next',
    'related_products' => 'Related products',
    'city_baku' => 'Baku',
    'city_region' => 'Region',
    'delivery_courier' => 'Courier',
    'delivery_post' => 'Post'
  ]
];

function t(string $key): string {
  global $I18N;
  $lang = current_lang();
  return $I18N[$lang][$key] ?? $key;
}
